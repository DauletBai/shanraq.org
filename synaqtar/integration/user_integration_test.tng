// user_integration_test.tng - ĞŸĞ°Ğ¹Ğ´Ğ°Ğ»Ğ°Ğ½ÑƒÑˆÑ‹ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ‚ĞµÑÑ‚Ñ‚ĞµÑ€Ñ–
// User integration tests

atqar user_integration_test_jasau() -> TestSuite {
    jasau test_suite: TestSuite = test_suite_jasau("User Integration Tests");
    qaytar test_suite;
}

// Test complete user registration flow
atqar test_paydalanu_tirkelu_flow() -> aqÄ±qat {
    korset("ğŸ§ª ĞŸĞ°Ğ¹Ğ´Ğ°Ğ»Ğ°Ğ½ÑƒÑˆÑ‹ Ñ‚Ñ–Ñ€ĞºĞµÑƒ Ğ°Ò“Ñ‹Ğ½Ğ´Ñ‹Ğ½ Ñ‚ĞµÑÑ‚Ñ–Ğ»ĞµÑƒ...");
    
    // Initialize system
    jasau init_result: aqÄ±qat = paydalanu_baskaru_initialize();
    eĞ³ĞµÑ€ (!init_result) {
        korset("âŒ Ğ–Ò¯Ğ¹ĞµĞ½Ñ– Ñ–ÑĞºĞµ Ò›Ğ¾ÑÑƒ Ò›Ğ°Ñ‚ĞµÑÑ–");
        qaytar jin;
    }
    
    // Test user registration
    jasau registration_result: JsonObject = paydalanu_tirkelu_jasau(
        "Integration Test User",
        "integration@test.com",
        "password123",
        "user"
    );
    
    eĞ³ĞµÑ€ (!json_object_get_boolean(registration_result, "success")) {
        korset("âŒ ĞŸĞ°Ğ¹Ğ´Ğ°Ğ»Ğ°Ğ½ÑƒÑˆÑ‹ Ñ‚Ñ–Ñ€ĞºĞµÑƒ Ò›Ğ°Ñ‚ĞµÑÑ–: " + json_object_get_string(registration_result, "error"));
        qaytar jin;
    }
    
    // Test user authentication
    jasau auth_result: JsonObject = paydalanu_kimdik_tekseru(
        "integration@test.com",
        "password123"
    );
    
    eĞ³ĞµÑ€ (!json_object_get_boolean(auth_result, "success")) {
        korset("âŒ ĞŸĞ°Ğ¹Ğ´Ğ°Ğ»Ğ°Ğ½ÑƒÑˆÑ‹ Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ò›Ğ°Ñ‚ĞµÑÑ–: " + json_object_get_string(auth_result, "error"));
        qaytar jin;
    }
    
    // Test user profile update
    jasau user: JsonObject = json_object_get_object(auth_result, "user");
    json_object_set_string(user, "name", "Updated Integration Test User");
    json_object_set_number(user, "updated_at", current_timestamp());
    
    jasau update_result: aqÄ±qat = paydalanu_zhangartu(user);
    
    eĞ³ĞµÑ€ (!update_result) {
        korset("âŒ ĞŸĞ°Ğ¹Ğ´Ğ°Ğ»Ğ°Ğ½ÑƒÑˆÑ‹ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ñ–Ğ½ Ğ¶Ğ°Ò£Ğ°Ñ€Ñ‚Ñƒ Ò›Ğ°Ñ‚ĞµÑÑ–");
        qaytar jin;
    }
    
    korset("âœ… ĞŸĞ°Ğ¹Ğ´Ğ°Ğ»Ğ°Ğ½ÑƒÑˆÑ‹ Ñ‚Ñ–Ñ€ĞºĞµÑƒ Ğ°Ò“Ñ‹Ğ½Ğ´Ñ‹ ÑÓ™Ñ‚Ñ‚Ñ– Ó©Ñ‚Ñ‚Ñ–");
    qaytar jan;
}

// Test user password change flow
atqar test_parol_ozgertu_flow() -> aqÄ±qat {
    korset("ğŸ§ª ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ Ó©Ğ·Ğ³ĞµÑ€Ñ‚Ñƒ Ğ°Ò“Ñ‹Ğ½Ğ´Ñ‹Ğ½ Ñ‚ĞµÑÑ‚Ñ–Ğ»ĞµÑƒ...");
    
    // Test password strength validation
    jasau strength_result: JsonObject = parol_kuat_tekseu("newpassword123");
    
    eĞ³ĞµÑ€ (json_object_get_string(strength_result, "strength") == "weak") {
        korset("âŒ ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ ĞºÒ¯ÑˆÑ– Ñ‚ĞµÑÑ‚Ñ– ÑÓ™Ñ‚ÑÑ–Ğ·");
        qaytar jin;
    }
    
    // Test password change
    jasau change_result: JsonObject = paydalanu_parol_ozgertu(
        "integration@test.com",
        "password123",
        "newpassword123"
    );
    
    eĞ³ĞµÑ€ (!json_object_get_boolean(change_result, "success")) {
        korset("âŒ ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ Ó©Ğ·Ğ³ĞµÑ€Ñ‚Ñƒ Ò›Ğ°Ñ‚ĞµÑÑ–: " + json_object_get_string(change_result, "error"));
        qaytar jin;
    }
    
    // Test authentication with new password
    jasau new_auth_result: JsonObject = paydalanu_kimdik_tekseru(
        "integration@test.com",
        "newpassword123"
    );
    
    eĞ³ĞµÑ€ (!json_object_get_boolean(new_auth_result, "success")) {
        korset("âŒ Ğ–Ğ°Ò£Ğ° Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒĞ¼ĞµĞ½ Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ò›Ğ°Ñ‚ĞµÑÑ–");
        qaytar jin;
    }
    
    korset("âœ… ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ Ó©Ğ·Ğ³ĞµÑ€Ñ‚Ñƒ Ğ°Ò“Ñ‹Ğ½Ğ´Ñ‹ ÑÓ™Ñ‚Ñ‚Ñ– Ó©Ñ‚Ñ‚Ñ–");
    qaytar jan;
}

// Test user statistics
atqar test_paydalanu_statistika() -> aqÄ±qat {
    korset("ğŸ§ª ĞŸĞ°Ğ¹Ğ´Ğ°Ğ»Ğ°Ğ½ÑƒÑˆÑ‹ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°ÑÑ‹Ğ½ Ñ‚ĞµÑÑ‚Ñ–Ğ»ĞµÑƒ...");
    
    jasau stats: JsonObject = paydalanu_statistika_alu();
    
    eĞ³ĞµÑ€ (json_object_get_number(stats, "total_users") < 1) {
        korset("âŒ ĞŸĞ°Ğ¹Ğ´Ğ°Ğ»Ğ°Ğ½ÑƒÑˆÑ‹Ğ»Ğ°Ñ€ ÑĞ°Ğ½Ñ‹ Ğ´Ò±Ñ€Ñ‹Ñ ĞµĞ¼ĞµÑ");
        qaytar jin;
    }
    
    eĞ³ĞµÑ€ (json_object_get_number(stats, "active_users") < 1) {
        korset("âŒ Ğ‘ĞµĞ»ÑĞµĞ½Ğ´Ñ– Ğ¿Ğ°Ğ¹Ğ´Ğ°Ğ»Ğ°Ğ½ÑƒÑˆÑ‹Ğ»Ğ°Ñ€ ÑĞ°Ğ½Ñ‹ Ğ´Ò±Ñ€Ñ‹Ñ ĞµĞ¼ĞµÑ");
        qaytar jin;
    }
    
    korset("âœ… ĞŸĞ°Ğ¹Ğ´Ğ°Ğ»Ğ°Ğ½ÑƒÑˆÑ‹ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°ÑÑ‹ Ğ´Ò±Ñ€Ñ‹Ñ");
    qaytar jan;
}

// Run all user integration tests
atqar user_integration_testlerin_ishke_engizu() {
    korset("ğŸ§ª ĞŸĞ°Ğ¹Ğ´Ğ°Ğ»Ğ°Ğ½ÑƒÑˆÑ‹ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ‚ĞµÑÑ‚Ñ‚ĞµÑ€Ñ–Ğ½ Ñ–ÑĞºĞµ Ò›Ğ¾ÑÑƒ...");
    
    jasau passed: san = 0;
    jasau total: san = 3;
    
    eĞ³ĞµÑ€ (test_paydalanu_tirkelu_flow()) {
        passed = passed + 1;
    }
    
    eĞ³ĞµÑ€ (test_parol_ozgertu_flow()) {
        passed = passed + 1;
    }
    
    eĞ³ĞµÑ€ (test_paydalanu_statistika()) {
        passed = passed + 1;
    }
    
    korset("ğŸ“Š Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ‚ĞµÑÑ‚ Ğ½Ó™Ñ‚Ğ¸Ğ¶ĞµĞ»ĞµÑ€Ñ–: " + passed + "/" + total + " Ó©Ñ‚Ñ‚Ñ–");
    
    eĞ³ĞµÑ€ (passed == total) {
        korset("âœ… Ğ‘Ğ°Ñ€Ğ»Ñ‹Ò› Ğ¿Ğ°Ğ¹Ğ´Ğ°Ğ»Ğ°Ğ½ÑƒÑˆÑ‹ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ‚ĞµÑÑ‚Ñ‚ĞµÑ€Ñ– ÑÓ™Ñ‚Ñ‚Ñ– Ó©Ñ‚Ñ‚Ñ–!");
    } aitpese {
        korset("âŒ ĞšĞµĞ¹Ğ±Ñ–Ñ€ Ğ¿Ğ°Ğ¹Ğ´Ğ°Ğ»Ğ°Ğ½ÑƒÑˆÑ‹ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ‚ĞµÑÑ‚Ñ‚ĞµÑ€Ñ– ÑÓ™Ñ‚ÑÑ–Ğ·!");
    }
}

