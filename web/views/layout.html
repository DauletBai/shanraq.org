{{ define "layout.html" }}
<!doctype html>
<html lang="en" data-bs-theme="light">
  <head>
    {{ template "partials/head" . }}
    {{ block "head" . }}{{ end }}
  </head>
  <body class="bg-body">
    {{ template "partials/header" . }}
    <main class="container py-4">
      <div class="row g-4">
        {{ if .SidebarLinks }}
        <div class="col-lg-3">
          {{ template "partials/sidebar" . }}
        </div>
        <div class="col-lg-9">
        {{ else }}
        <div class="col-12">
        {{ end }}
          {{ if eq .PageID "home" }}
            {{ template "home-content" . }}
          {{ else if eq .PageID "dashboard" }}
            {{ template "dashboard-content" . }}
          {{ else }}
            {{ block "content" . }}
              <div class="alert alert-warning">No content provided.</div>
            {{ end }}
          {{ end }}
        </div>
      </div>
    </main>
    {{ template "partials/footer" . }}
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-gO2XcXcXwjlzAIXazhbugzuDUFcPRl1BDpRP70dNDO7xjMnIKPQ4FI/wV5p6vo1z" crossorigin="anonymous"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        var toggler = document.querySelector('.navbar-toggler');
        var target = document.getElementById('navbarMain');
        if (!toggler || !target) {
          return;
        }

        toggler.addEventListener('click', function (event) {
          event.preventDefault();
          var expanded = toggler.getAttribute('aria-expanded') === 'true';
          toggler.setAttribute('aria-expanded', (!expanded).toString());

          if (window.bootstrap && window.bootstrap.Collapse) {
            var collapse = window.bootstrap.Collapse.getOrCreateInstance(target, { toggle: false });
            collapse.toggle();
            return;
          }

          var isShown = target.classList.contains('show');
          target.classList.toggle('show', !isShown);
          toggler.classList.toggle('collapsed', isShown);
        });
      });
    </script>
    {{ if eq .PageID "home" }}
      {{ template "home-scripts" . }}
    {{ else if eq .PageID "dashboard" }}
      {{ template "dashboard-scripts" . }}
    {{ else }}
      {{ block "scripts" . }}{{ end }}
    {{ end }}
  </body>
</html>
{{ end }}
